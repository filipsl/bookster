@import models.isbn.Isbn10
@(book: Book, ratings: Map[Long,Int] = Map())

<div class="stars">
    <div class="stars__icons stars__icons--@if(!ratings.isDefinedAt(book.id)) {un}rated">
        @for(rating <- 1 to 5) {
            <div>
                <a href="@routes.RatingsController.rate(book.isbn10.toString, rating)">
                    <i data-feather="star" class="star star--@if(rating <= ratings.getOrElse(book.id, book.averageRating.round.toInt)) {filled} else {empty}"></i>
                </a>
        }
        @for(rating <- 1 to 5) {
            </div>
        }
    </div>

    @if(ratings.isDefinedAt(book.id)) {
        <strong>@{ratings(book.id)}.0</strong>
        <a href="@routes.RatingsController.unrate(book.isbn10.toString)" class="text-muted stars__unrate">@tags.icon("x")</a>
    } else {
        @BigDecimal(book.averageRating).setScale(2, BigDecimal.RoundingMode.HALF_EVEN).toDouble
        (@book.ratingsCount&nbsp;vote@if(book.ratingsCount != 1){s})
    }
</div>